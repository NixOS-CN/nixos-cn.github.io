import{_ as o}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as l,o as r,c as i,a as e,b as s,d as n,e as t}from"./app-BNkVxcYY.js";const p={},c=t(`<h1 id="wsl2-安装" tabindex="-1"><a class="header-anchor" href="#wsl2-安装"><span>WSL2 安装</span></a></h1><h2 id="启用-wsl-2-环境" tabindex="-1"><a class="header-anchor" href="#启用-wsl-2-环境"><span>启用 WSL 2 环境</span></a></h2><h2 id="快捷启用" tabindex="-1"><a class="header-anchor" href="#快捷启用"><span>快捷启用</span></a></h2><p>对于新系统（Windows 11，Windows 10 的 2004 版本或更新的系统），使用==管理员权限 ==下的 CMD 或 Powershell 执行下面的命令即可：</p><div class="language-powershell line-numbers-mode" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>wsl <span class="token operator">--</span>install <span class="token operator">--</span>no-distribution
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这条命令会帮助你安装 WSL2 环境的依赖，相比逐个去启用组件是更简单快捷。</p><h2 id="手动启用" tabindex="-1"><a class="header-anchor" href="#手动启用"><span>手动启用</span></a></h2><p>与上面不同的是，这种方法可能适合稍旧一些的系统。</p><p>我们需要启用两个可选功能，它们分别是 “适用于 Linux 的 Windows 子系统” 和 “虚拟机平台”：</p><div class="language-powershell line-numbers-mode" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>dism<span class="token punctuation">.</span>exe <span class="token operator">/</span>online <span class="token operator">/</span><span class="token function">enable-feature</span> <span class="token operator">/</span>featurename:Microsoft-Windows-Subsystem-Linux <span class="token operator">/</span>all <span class="token operator">/</span>norestart
dism<span class="token punctuation">.</span>exe <span class="token operator">/</span>online <span class="token operator">/</span><span class="token function">enable-feature</span> <span class="token operator">/</span>featurename:VirtualMachinePlatform <span class="token operator">/</span>all <span class="token operator">/</span>norestart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>然后重新启动计算机。</p>`,11),d={href:"https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi",target:"_blank",rel:"noopener noreferrer"},h=t(`<p>记得设置默认版本为 2：</p><div class="language-powershell line-numbers-mode" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>wsl <span class="token operator">--</span><span class="token function">set-default</span><span class="token operator">-</span>version 2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,2),u={class:"hint-container warning"},m=e("p",{class:"hint-container-title"},"尽力支持 NixOS-WSL 对 inbox 版本的 WSL（即通过 Window 可选功能启用的",-1),w=e("p",null,"WSL）是尽力支持的，如果有条件，请更新到最新 Windows 使用 Windows 商店分发（使用第一种方法安装方式）的最新 WSL 支持。:::",-1),g=e("h2",{id:"下载根文件系统",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#下载根文件系统"},[e("span",null,"下载根文件系统")])],-1),_={href:"https://github.com/nix-community/NixOS-WSL/releases",target:"_blank",rel:"noopener noreferrer"},x=e("code",null,"nixos-wsl.tar.gz",-1),v=t(`<p>然后决定好你要将这个文件系统导入至哪里，这里以 <code>E:\\wslDistroStorage\\NixOS</code> 举例，并且确认当前的工作文件夹就是你刚刚下载的根文件系统档案所在的文件夹。</p><div class="language-powershell line-numbers-mode" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>wsl <span class="token operator">--</span>import NixOS E:\\wslDistroStorage\\NixOS nixos-wsl<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz <span class="token operator">--</span>version 2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>然后引导到 NixOS：</p><div class="language-powershell line-numbers-mode" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>wsl <span class="token operator">-</span>d NixOS
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,4),S={class:"hint-container tip"},b=e("p",{class:"hint-container-title"},"默认发行版可以通过 `wsl -s NixOS` 将 NixOS 设置为默认启动的发行版。:::",-1),W={href:"https://learn.microsoft.com/zh-cn/windows/wsl/troubleshooting",target:"_blank",rel:"noopener noreferrer"};function k(f,L){const a=l("ExternalLinkIcon");return r(),i("div",null,[c,e("p",null,[s("我们还需要一个完整的 Linux 内核："),e("a",d,[s("WSL 2 Linux 内核更新包"),n(a)]),s("，安装它。")]),h,e("div",u,[m,w,g,e("p",null,[s("在 "),e("a",_,[s("NixOS-WSL 项目的最新 Release 页"),n(a)]),s("中下载 "),x,s("。")]),v,e("div",S,[b,e("p",null,[s("第一次启用会稍久，但是你不够幸运的话，可能终端上会出现令人厌烦的错误码，你可以在"),e("a",W,[s("疑难解答"),n(a)]),s(" 页面找到找到你可能期待的答案。")])])])])}const O=o(p,[["render",k],["__file","WSL2.html.vue"]]),C=JSON.parse('{"path":"/tutorials/installation/WSL2.html","title":"WSL2 安装","lang":"zh-CN","frontmatter":{"description":"WSL2 安装 启用 WSL 2 环境 快捷启用 对于新系统（Windows 11，Windows 10 的 2004 版本或更新的系统），使用==管理员权限 ==下的 CMD 或 Powershell 执行下面的命令即可： 这条命令会帮助你安装 WSL2 环境的依赖，相比逐个去启用组件是更简单快捷。 手动启用 与上面不同的是，这种方法可能适合稍旧一些...","head":[["meta",{"property":"og:url","content":"https://nixos-cn.github.io/tutorials/installation/WSL2.html"}],["meta",{"property":"og:site_name","content":"NixOS 中文"}],["meta",{"property":"og:title","content":"WSL2 安装"}],["meta",{"property":"og:description","content":"WSL2 安装 启用 WSL 2 环境 快捷启用 对于新系统（Windows 11，Windows 10 的 2004 版本或更新的系统），使用==管理员权限 ==下的 CMD 或 Powershell 执行下面的命令即可： 这条命令会帮助你安装 WSL2 环境的依赖，相比逐个去启用组件是更简单快捷。 手动启用 与上面不同的是，这种方法可能适合稍旧一些..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-30T15:34:48.000Z"}],["meta",{"property":"article:author","content":"NixOS-CN"}],["meta",{"property":"article:modified_time","content":"2024-06-30T15:34:48.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"WSL2 安装\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-06-30T15:34:48.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"NixOS-CN\\",\\"url\\":\\"https://github.com/nixos-cn\\"}]}"]]},"headers":[{"level":2,"title":"启用 WSL 2 环境","slug":"启用-wsl-2-环境","link":"#启用-wsl-2-环境","children":[]},{"level":2,"title":"快捷启用","slug":"快捷启用","link":"#快捷启用","children":[]},{"level":2,"title":"手动启用","slug":"手动启用","link":"#手动启用","children":[]}],"git":{"createdTime":1696961467000,"updatedTime":1719761688000,"contributors":[{"name":"OpenTritium","email":"tritium404@hotmail.com","commits":1},{"name":"Ryan Yin","email":"xiaoyin_c@qq.com","commits":1}]},"readingTime":{"minutes":1.59,"words":476},"filePathRelative":"tutorials/installation/WSL2.md","localizedDate":"2023年10月10日","autoDesc":true,"excerpt":"\\n<h2>启用 WSL 2 环境</h2>\\n<h2>快捷启用</h2>\\n<p>对于新系统（Windows 11，Windows 10 的 2004 版本或更新的系统），使用==管理员权限\\n==下的 CMD 或 Powershell 执行下面的命令即可：</p>\\n<div class=\\"language-powershell\\" data-ext=\\"powershell\\" data-title=\\"powershell\\"><pre class=\\"language-powershell\\"><code>wsl <span class=\\"token operator\\">--</span>install <span class=\\"token operator\\">--</span>no-distribution\\n</code></pre></div>"}');export{O as comp,C as data};
