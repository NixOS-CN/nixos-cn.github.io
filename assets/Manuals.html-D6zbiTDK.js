import{_ as o}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as p,a as i,b as s,d as a,e as t,r as l,o as r}from"./app-B9_QaUY9.js";const c={},d={href:"https://www.ietf.org/rfc/rfc2396.txt",target:"_blank",rel:"noopener noreferrer"},u={href:"https://www.zhihu.com/question/28292740",target:"_blank",rel:"noopener noreferrer"},k={href:"https://zh.wikipedia.org/wiki/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B",target:"_blank",rel:"noopener noreferrer"},m={href:"https://nix.dev/manual/nix/2.22/language/builtins#built-in-functions",target:"_blank",rel:"noopener noreferrer"},v={href:"https://github.com/NixOS/nixpkgs/lib",target:"_blank",rel:"noopener noreferrer"},g={href:"https://noogle.dev/",target:"_blank",rel:"noopener noreferrer"},x={href:"https://nixos.org/manual/nixpkgs/stable/#sec-functions-library-attrsets",target:"_blank",rel:"noopener noreferrer"},b={href:"https://nixos.org/manual/nixpkgs/stable/#sec-functions-library-lists",target:"_blank",rel:"noopener noreferrer"};function h(f,n){const e=l("ExternalLinkIcon");return r(),p("div",null,[n[21]||(n[21]=i(`<h1 id="nix-语言进阶手册" tabindex="-1"><a class="header-anchor" href="#nix-语言进阶手册"><span>Nix 语言进阶手册</span></a></h1><h2 id="数据类型" tabindex="-1"><a class="header-anchor" href="#数据类型"><span>数据类型</span></a></h2><h3 id="原始数据类型" tabindex="-1"><a class="header-anchor" href="#原始数据类型"><span>原始数据类型</span></a></h3><h4 id="字符串" tabindex="-1"><a class="header-anchor" href="#字符串"><span>字符串</span></a></h4><p>有三种方式定义字符串。</p><h5 id="单行字符串" tabindex="-1"><a class="header-anchor" href="#单行字符串"><span>单行字符串</span></a></h5><p>与大多数编程语言的字符串一致，使用双引号闭合：</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token string">&quot;Hello, nix!\\n&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="多行字符串" tabindex="-1"><a class="header-anchor" href="#多行字符串"><span>多行字符串</span></a></h5><p>多行字符串是通过<mark>两个单引号</mark>闭合的。</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token string">&#39;&#39;
This is the first line.
This is the second line.
This is the third line.
&#39;&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>多行字符串往往会带有不同程度的缩进，会被进一步处理。也就是说对于以下字符串：</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token string">&#39;&#39;
  This is the first line.
  This is the second line.
    This is the third line.
&#39;&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>会被“智能缩进”处理，处理后的结果是：</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token string">&#39;&#39;
This is the first line.
This is the second line.
  This is the third line.
&#39;&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>每一行都被前移了最小缩进数个字符。</p><p>同时，假如第一行被占空了，也会对其进行处理：</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token string">&#39;&#39;

There&#39;s a row of spaces up there.
&#39;&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>处理后的数据是：</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token string">&#39;&#39;
There&#39;s a row of spaces up there.
&#39;&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Nix 只会将自动处理后的字符串当作输入，而不是原始字符串（raw string）。</p><h5 id="uri" tabindex="-1"><a class="header-anchor" href="#uri"><span>URI</span></a></h5>`,22)),s("p",null,[n[1]||(n[1]=a("为了书写简便， ",-1)),s("a",d,[n[0]||(n[0]=a("RFC 2396",-1)),t(e)]),n[2]||(n[2]=a(" 规定了对于 URI 可以不使用引号闭合：",-1))]),n[22]||(n[22]=i(`<div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code>UriWithoutQuotes <span class="token operator">=</span> <span class="token url">http://example.org/foo.tar.bz2</span>
UriWithQuotes <span class="token operator">=</span> <span class="token string">&quot;http://example.org/foo.tar.bz2&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>两者是等价的。</p><h4 id="数字" tabindex="-1"><a class="header-anchor" href="#数字"><span>数字</span></a></h4><p>数字被分为浮点型（比如 <code>.114514</code>）与整型（比如 <code>2233</code>）。</p><p>数字是类型兼容的：纯整数运算总是返回整数，而任何涉及至少一个浮点数的运算都会返回一个浮点数。</p><h4 id="路径" tabindex="-1"><a class="header-anchor" href="#路径"><span>路径</span></a></h4><p>路径至少需要包含一个斜杠才能被识别为路径：</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code>/f<span class="token url">oo/bar/bla.nix</span>
<span class="token url">~/foo/bar.nix</span>
<span class="token url">../foo/bar/qux.nix</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>除了某些尖括号路径（比如 <code>&lt;nixpkgs&gt;</code>）外，其他路径都支持字符串插值。</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token string">&quot;<span class="token interpolation"><span class="token antiquotation important">$</span><span class="token punctuation">{</span><span class="token url">./foo.txt</span><span class="token punctuation">}</span></span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="布尔" tabindex="-1"><a class="header-anchor" href="#布尔"><span>布尔</span></a></h4><p><code>true</code> 或 <code>false</code>。</p><h4 id="空" tabindex="-1"><a class="header-anchor" href="#空"><span>空</span></a></h4><p>字面意思上的 <code>null</code>。</p><h3 id="列表" tabindex="-1"><a class="header-anchor" href="#列表"><span>列表</span></a></h3><p>列表使用中括号闭合，空格分隔元素，一个列表允许包含不同类型的值：</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token punctuation">[</span> <span class="token number">123</span> <span class="token url">./foo.nix</span> <span class="token string">&quot;abc&quot;</span> <span class="token punctuation">(</span>f <span class="token punctuation">{</span> x <span class="token operator">=</span> y<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>此处如果不给 <code>f { x = y; }</code> 打上括号，就会把函数也当作此列表的值。</p><h3 id="属性集" tabindex="-1"><a class="header-anchor" href="#属性集"><span>属性集</span></a></h3><p>属性集是用大括号括起来的名称与值对（称为属性）的集合。</p><p>属性名可以是标识符或字符串。标识符必须以字母或下划线开头，可以包含字母、数字、下划线、撇号（<code>&#39;</code>）或连接符（<code>-</code>）。</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token punctuation">{</span>
  x <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
  text <span class="token operator">=</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">;</span>
  y <span class="token operator">=</span> f <span class="token punctuation">{</span> bla <span class="token operator">=</span> <span class="token number">456</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们使用 <code>.</code> 访问各个属性：</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token punctuation">{</span> a <span class="token operator">=</span> <span class="token string">&quot;Foo&quot;</span><span class="token punctuation">;</span> b <span class="token operator">=</span> <span class="token string">&quot;Bar&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">.</span>a
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>使用 <code>or</code> 关键字，可以在属性选择中提供默认值：</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token punctuation">{</span> a <span class="token operator">=</span> <span class="token string">&quot;Foo&quot;</span><span class="token punctuation">;</span> b <span class="token operator">=</span> <span class="token string">&quot;Bar&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">.</span>c <span class="token keyword">or</span> <span class="token string">&quot;Xyzzy&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>因为属性 <code>c</code> 不在属性集里，故输出默认值。</p><p>也可以用字符串去访问属性：</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token punctuation">{</span> <span class="token string">&quot;$!@#?&quot;</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token string">&quot;$!@#?&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>属性名也支持字符串插值：</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token keyword">let</span> bar <span class="token operator">=</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span> <span class="token keyword">in</span>
<span class="token punctuation">{</span> foo <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token antiquotation important">$</span><span class="token punctuation">{</span>bar<span class="token punctuation">}</span>
<span class="token keyword">let</span> bar <span class="token operator">=</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span> <span class="token keyword">in</span>
<span class="token punctuation">{</span> <span class="token antiquotation important">$</span><span class="token punctuation">{</span>bar<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">.</span>foo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>两者的值都是 123。</p><p>在特殊情况下，如果集合声明中的属性名求值为 null（这是错误的，因为 null 不能被强制为字符串），那么该属性将不会被添加到集合中：</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token punctuation">{</span> <span class="token antiquotation important">$</span><span class="token punctuation">{</span><span class="token keyword">if</span> foo <span class="token keyword">then</span> <span class="token string">&quot;bar&quot;</span> <span class="token keyword">else</span> <span class="token keyword">null</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果 foo 的值为 <code>false</code>，则其值为 <code>{}</code>。</p><p>如果一个集合的 <code>__functor</code> 属性的值是可调用的（即它本身是一个函数或是其中一个集合的 <code>__functor</code> 属性的值是可调用的），那么它就可以像函数一样被应用，首先传入的是集合本身，例如：</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token keyword">let</span> <span class="token function">add</span> <span class="token operator">=</span> <span class="token punctuation">{</span> __functor <span class="token operator">=</span> self<span class="token punctuation">:</span> x<span class="token punctuation">:</span> x <span class="token operator">+</span> self<span class="token punctuation">.</span>x<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    inc <span class="token operator">=</span> <span class="token function">add</span> <span class="token operator">//</span> <span class="token punctuation">{</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">in</span> inc <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>求值为 2。这可用于为函数附加元数据，而调用者无需对其进行特殊处理，也可用于实现面向对象编程等形式。</p><h2 id="数据构造" tabindex="-1"><a class="header-anchor" href="#数据构造"><span>数据构造</span></a></h2><h3 id="递归属性集" tabindex="-1"><a class="header-anchor" href="#递归属性集"><span>递归属性集</span></a></h3><h3 id="let-绑定" tabindex="-1"><a class="header-anchor" href="#let-绑定"><span><code>let</code> 绑定</span></a></h3><h3 id="继承至属性" tabindex="-1"><a class="header-anchor" href="#继承至属性"><span>继承至属性</span></a></h3><h3 id="函数" tabindex="-1"><a class="header-anchor" href="#函数"><span>函数</span></a></h3><h3 id="条件判断" tabindex="-1"><a class="header-anchor" href="#条件判断"><span>条件判断</span></a></h3><p>Nix 的条件判断表达式的结构类似于这样：</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token keyword">if</span> <span class="token operator">&lt;</span>exprCond<span class="token operator">&gt;</span> <span class="token keyword">then</span> <span class="token operator">&lt;</span>exprThen<span class="token operator">&gt;</span> <span class="token keyword">else</span> <span class="token operator">&lt;</span>exprElse<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>其中 <em>exprCond</em> 的求值结果必须为布尔值 <code>true</code> 或 <code>false</code>. 当 <em>exprCond</em> 求值为 <code>true</code> 时，上述条件表达式的结果为 <em>exprThen</em> ，否则结果为 <em>exprElse</em>.</p><p>定义时的使用例子如下：</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token comment"># 利用 if-then-else 表达式实现函数：</span>
myFunction <span class="token operator">=</span> x<span class="token punctuation">:</span> <span class="token keyword">if</span> x <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">then</span> <span class="token string">&quot;Positive&quot;</span> <span class="token keyword">else</span> <span class="token string">&quot;Non-positive&quot;</span>
myFunction <span class="token number">0</span> <span class="token comment"># Non-positive</span>
myFunction <span class="token number">1</span> <span class="token comment"># Positive</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token comment"># 利用 if-then-else 表达式定义变量：</span>
no <span class="token operator">=</span> <span class="token number">7</span>
gt0 <span class="token operator">=</span> <span class="token keyword">if</span> no <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">then</span> <span class="token string">&quot;yes&quot;</span> <span class="token keyword">else</span> <span class="token string">&quot;no&quot;</span>
<span class="token comment"># gt0 变量值为 &quot;yes&quot;</span>
gt0
<span class="token comment"># =&gt; &quot;yes&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>亦可嵌套使用</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token comment"># 利用 if-then-else 表达式实现函数：</span>
myPlan <span class="token operator">=</span> target<span class="token punctuation">:</span> <span class="token keyword">if</span> target <span class="token operator">==</span> <span class="token string">&quot;fitness&quot;</span> <span class="token keyword">then</span> <span class="token string">&quot;I&#39;m going swimming.&quot;</span>
                <span class="token keyword">else</span> <span class="token keyword">if</span> target <span class="token operator">==</span> <span class="token string">&quot;purchase&quot;</span> <span class="token keyword">then</span> <span class="token string">&quot;I&#39;m going shopping.&quot;</span>
                <span class="token keyword">else</span> <span class="token keyword">if</span> target <span class="token operator">==</span> <span class="token string">&quot;learning&quot;</span> <span class="token keyword">then</span> <span class="token string">&quot;I&#39;m going to read a book.&quot;</span>
                <span class="token keyword">else</span> <span class="token string">&quot;I&#39;m not going anywhere.&quot;</span>
myPlan <span class="token string">&quot;fitness&quot;</span> <span class="token comment"># &quot;I&#39;m going swimming.&quot;</span>
myPlan <span class="token keyword">null</span> <span class="token comment"># &quot;I&#39;m not going anywhere.&quot;</span>

<span class="token comment">#  利用 if-then-else 表达式定义变量：</span>
x <span class="token operator">=</span> <span class="token keyword">null</span>
text <span class="token operator">=</span>
  <span class="token keyword">if</span> x <span class="token operator">==</span> <span class="token string">&quot;a&quot;</span> <span class="token keyword">then</span>
    <span class="token string">&quot;hello&quot;</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> x <span class="token operator">==</span> <span class="token string">&quot;b&quot;</span> <span class="token keyword">then</span>
    <span class="token string">&quot;hi&quot;</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> x <span class="token operator">==</span> <span class="token string">&quot;c&quot;</span> <span class="token keyword">then</span>
    <span class="token string">&quot;ciao&quot;</span>
  <span class="token keyword">else</span>
    <span class="token string">&quot;x is invalid&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="循环控制" tabindex="-1"><a class="header-anchor" href="#循环控制"><span>循环控制</span></a></h3><p>Nix 是一种函数式编程语言，每一段 Nix 程序都是一个完整的表达式。这与流行的 Java, Python 等命令式编程语言有很大不同，命令式编程语言的程序往往是一段包含变量声明、赋值、跳转等指令的指令序列。</p>`,54)),s("p",null,[n[5]||(n[5]=a("这里不展开说明函数式编程与命令式编程的区别，不了解这个的读者建议先阅读",-1)),s("a",u,[n[3]||(n[3]=a("什么是函数式编程思维？- 知乎",-1)),t(e)]),n[6]||(n[6]=a(" 与",-1)),s("a",k,[n[4]||(n[4]=a("函数式编程 - WIkipedia",-1)),t(e)]),n[7]||(n[7]=a(" 理清个中关系。",-1))]),n[23]||(n[23]=s("p",null,"一言蔽之，Nix 语言中没有 while/for 循环这类控制结构，取而代之的是以递归为基础实现的一系列高阶函数。Nix 的标准库提供了一系列此类高阶函数用于对字符串、列表等可迭代对象进行操作。",-1)),n[24]||(n[24]=s("h4",{id:"内建函数与-nixpkgs-lib-函数库",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#内建函数与-nixpkgs-lib-函数库"},[s("span",null,[a("内建函数与 "),s("code",null,"nixpkgs.lib"),a(" 函数库")])])],-1)),s("p",null,[n[9]||(n[9]=a("Nix 语言自身提供了一些精简的内建函数，可通过 ",-1)),n[10]||(n[10]=s("code",null,"builtins.xxx",-1)),n[11]||(n[11]=a(" 这种方式使用，官方文档参见 ",-1)),s("a",m,[n[8]||(n[8]=a("Built-in Functions - Nix Manual",-1)),t(e)]),n[12]||(n[12]=a(".",-1))]),s("p",null,[n[14]||(n[14]=a("此外，官方函数库 ",-1)),s("a",v,[n[13]||(n[13]=a("nixpkgs.lib",-1)),t(e)]),n[15]||(n[15]=a(" 提供了比 builtins 更丰富的功能。",-1))]),s("p",null,[n[17]||(n[17]=a("社区提供的 ",-1)),s("a",g,[n[16]||(n[16]=a("Noogle Search",-1)),t(e)]),n[18]||(n[18]=a(" 可以相当容易地搜索上述两类函数，推荐一用。",-1))]),n[25]||(n[25]=i(`<p>下面针对 <code>builtins</code> 与 <code>nixpkgs.lib</code> 的用法各举一例：</p><p>例子如下：</p><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token comment"># 通过 nixpkgs.lib.range，生成指定范围元素的列表</span>
nixpkgs <span class="token operator">=</span> <span class="token function">import</span> <span class="token operator">&lt;</span>nixpkgs<span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
alist <span class="token operator">=</span> nixpkgs<span class="token punctuation">.</span>lib<span class="token punctuation">.</span>range <span class="token number">4</span> <span class="token number">7</span>
alist
<span class="token comment"># =&gt; [ 4 5 6 7 ]</span>

<span class="token comment"># 通过内建函数 filter，遍历列表中的元素并过滤</span>
<span class="token keyword">builtins</span><span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">(</span>item<span class="token punctuation">:</span> item <span class="token operator">==</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">[</span> <span class="token string">&quot;hello&quot;</span> <span class="token string">&quot;world&quot;</span> <span class="token punctuation">]</span>
<span class="token comment"># =&gt; [ &quot;hello&quot; ]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>具体请参考:</p>`,4)),s("ul",null,[s("li",null,[s("a",x,[n[19]||(n[19]=a("属性集相关函数",-1)),t(e)])]),s("li",null,[s("a",b,[n[20]||(n[20]=a("列表相关函数",-1)),t(e)])])]),n[26]||(n[26]=i(`<h4 id="递归函数" tabindex="-1"><a class="header-anchor" href="#递归函数"><span>递归函数</span></a></h4><p>如前所述，Nix 语言作为一种函数式编程语言，它采用递归取代了命令式编程语言中的循环等控制结构。</p><p>这里举个简单的例子来说明 Nix 语言中如何实现一个递归函数：</p><blockquote><p>⚠️注意：对新手而言，<code>nixpkgs.lib</code> 中的函数基本够用了，建议优先查找使用内建函数和 <code>nixpkgs.lib</code> 中的函数，如果找不到自己想要的功能再考虑自行实现。</p></blockquote><div class="language-nix line-numbers-mode" data-ext="nix" data-title="nix"><pre class="language-nix"><code><span class="token keyword">let</span>
  recurse <span class="token operator">=</span> n<span class="token punctuation">:</span> <span class="token keyword">if</span> n <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token keyword">then</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">else</span> recurse <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">++</span> <span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">in</span>
  recurse <span class="token number">5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="断言" tabindex="-1"><a class="header-anchor" href="#断言"><span>断言</span></a></h3><h3 id="with-表达式" tabindex="-1"><a class="header-anchor" href="#with-表达式"><span><code>with</code> 表达式</span></a></h3><h3 id="注释" tabindex="-1"><a class="header-anchor" href="#注释"><span>注释</span></a></h3>`,8))])}const w=o(c,[["render",h],["__file","Manuals.html.vue"]]),N=JSON.parse('{"path":"/tutorials/lang/Manuals.html","title":"Nix 语言进阶手册","lang":"zh-CN","frontmatter":{"description":"Nix 语言进阶手册 数据类型 原始数据类型 字符串 有三种方式定义字符串。 单行字符串 与大多数编程语言的字符串一致，使用双引号闭合： 多行字符串 多行字符串是通过两个单引号闭合的。 多行字符串往往会带有不同程度的缩进，会被进一步处理。也就是说对于以下字符串： 会被“智能缩进”处理，处理后的结果是： 每一行都被前移了最小缩进数个字符。 同时，假如第一...","head":[["meta",{"property":"og:url","content":"https://nixos-cn.github.io/tutorials/lang/Manuals.html"}],["meta",{"property":"og:site_name","content":"NixOS 中文"}],["meta",{"property":"og:title","content":"Nix 语言进阶手册"}],["meta",{"property":"og:description","content":"Nix 语言进阶手册 数据类型 原始数据类型 字符串 有三种方式定义字符串。 单行字符串 与大多数编程语言的字符串一致，使用双引号闭合： 多行字符串 多行字符串是通过两个单引号闭合的。 多行字符串往往会带有不同程度的缩进，会被进一步处理。也就是说对于以下字符串： 会被“智能缩进”处理，处理后的结果是： 每一行都被前移了最小缩进数个字符。 同时，假如第一..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-05T13:58:51.000Z"}],["meta",{"property":"article:author","content":"NixOS-CN"}],["meta",{"property":"article:modified_time","content":"2024-07-05T13:58:51.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Nix 语言进阶手册\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-07-05T13:58:51.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"NixOS-CN\\",\\"url\\":\\"https://github.com/nixos-cn\\"}]}"]]},"headers":[{"level":2,"title":"数据类型","slug":"数据类型","link":"#数据类型","children":[{"level":3,"title":"原始数据类型","slug":"原始数据类型","link":"#原始数据类型","children":[]},{"level":3,"title":"列表","slug":"列表","link":"#列表","children":[]},{"level":3,"title":"属性集","slug":"属性集","link":"#属性集","children":[]}]},{"level":2,"title":"数据构造","slug":"数据构造","link":"#数据构造","children":[{"level":3,"title":"递归属性集","slug":"递归属性集","link":"#递归属性集","children":[]},{"level":3,"title":"let 绑定","slug":"let-绑定","link":"#let-绑定","children":[]},{"level":3,"title":"继承至属性","slug":"继承至属性","link":"#继承至属性","children":[]},{"level":3,"title":"函数","slug":"函数","link":"#函数","children":[]},{"level":3,"title":"条件判断","slug":"条件判断","link":"#条件判断","children":[]},{"level":3,"title":"循环控制","slug":"循环控制","link":"#循环控制","children":[]},{"level":3,"title":"断言","slug":"断言","link":"#断言","children":[]},{"level":3,"title":"with 表达式","slug":"with-表达式","link":"#with-表达式","children":[]},{"level":3,"title":"注释","slug":"注释","link":"#注释","children":[]}]}],"git":{"createdTime":1697259560000,"updatedTime":1720187931000,"contributors":[{"name":"Tatooi Noyo","email":"tatooi.noyo@outlook.com","commits":12},{"name":"Ryan Yin","email":"xiaoyin_c@qq.com","commits":6},{"name":"OpenTritium","email":"tritium404@hotmail.com","commits":4}]},"readingTime":{"minutes":5.83,"words":1749},"filePathRelative":"tutorials/lang/Manuals.md","localizedDate":"2023年10月14日","autoDesc":true,"excerpt":"\\n<h2>数据类型</h2>\\n<h3>原始数据类型</h3>\\n<h4>字符串</h4>\\n<p>有三种方式定义字符串。</p>\\n<h5>单行字符串</h5>\\n<p>与大多数编程语言的字符串一致，使用双引号闭合：</p>\\n<div class=\\"language-nix\\" data-ext=\\"nix\\" data-title=\\"nix\\"><pre class=\\"language-nix\\"><code><span class=\\"token string\\">\\"Hello, nix!\\\\n\\"</span>\\n</code></pre></div><h5>多行字符串</h5>\\n<p>多行字符串是通过<mark>两个单引号</mark>闭合的。</p>"}');export{w as comp,N as data};
